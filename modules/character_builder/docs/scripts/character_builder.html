<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			Index Project - character_builder
		</title>
		<link rel="preload" as="image" href="../../../../assets/images/docs_background.png">
		<link rel="stylesheet" type="text/css" href="../../../../assets/style.css">
	</head>
	<body>
		<div class="scanlines">
		</div>
		<script src="../../../../assets/sidebar_injector_script.js">
		</script>
		<center>
			<div class="everything">
				<div class="sidebar">
					<h1>
						Index Project Guide
					</h1>
					<a href="../index.html">
						Module Index
					</a>
					<br/>
					<br/>
					<input type="text" class="searchbar" placeholder="Search...">
						<div class="sidebar-content" id="sidebar-content">
						</div>
					</div>
					<div class="main_body">
						<div class="top_desc">
							<div class="script_props">
								<h3>
									Module: character_builder
								</h3>
								<h3>
									Script: character_builder
								</h3>
								<h3>
									Class Name: null
								</h3>
								<h3>
									Extends: Spatial
								</h3>
								<h3>
									NODE
								</h3>
								<p class="red-marking">
									Page last updated:<br>
									October 23, 2025 at 21:10 UTC
								</p>
								<br>
							</div>
							<p>
								Main script of CharacterBuilder system that is working as a fucking<br>
								duct tape or something. It is basically getting all parts of the scene,<br>
								connect them together, signal up, function call down, etc.<br>
								Even though it exists to handle the signals of multiple different parts,<br>
								there is some logic related to selection.<br>
							</p>
						</div>
						<div class="bottom_desc">
							<div class="variable_desc_div">
								<p class="flair_const">
									Constant
								</p>
								<p class="var_desc_name_text">
									SAVES_PATH
								</p>
								<p class="var_desc_name_value">
									[]
								</p>
							</div>
							<p class="var_desc_text">
								Character Builder's hit_body script that is supposed to contain all<br/>
								logic related to selection, rotation, etc
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									selected
								</p>
								<p class="var_desc_name_value">
									[]
								</p>
							</div>
							<p class="var_desc_text">
								Array of all selected hitbodies...<br/>
								actually does it make any sense? I stole it from comics renderer.<br/>
								I mean, yeah, it's cool and all, but it doesn't make any sense<br/>
								to select multiple objects in CharacterBuilder, because<br/>
								you have to work with individual elements for the most part.<br/>
								It would be nice to have possibility to select multiple character details...<br/>
								but i'm not sure if i would make it anyway.
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									in_UI
								</p>
								<p class="var_desc_name_value">
									false
								</p>
							</div>
							<p class="var_desc_text">
								Is your cursor inside a UI element? Turns true/false depending on cursor pos.<br/>
								If true, logic related to selection and camera processing is disabled.
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									character_name
								</p>
								<p class="var_desc_name_value">
									""
								</p>
							</div>
							<p class="var_desc_text">
								What's the character name? Can be changed at the top UI element at any time.
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									selected_body
								</p>
								<p class="var_desc_name_value">
									null
								</p>
							</div>
							<p class="var_desc_text">
								This variable is used for more precise check of currently selected body.<br/>
								It might not actually store a current one, so you'd better use selected
								[0]
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									is_selecting
								</p>
								<p class="var_desc_name_value">
									false
								</p>
							</div>
							<p class="var_desc_text">
								Is user selecting something right now? Used for selection fix
							</p>
							<div class="variable_desc_div">
								<p class="flair_var">
									Variable
								</p>
								<p class="var_desc_name_text">
									nothing_selected_frames
								</p>
								<p class="var_desc_name_value">
									0
								</p>
							</div>
							<p class="var_desc_text">
								Amount of frames in which user haven't selected anything yet<br/>
								Used for selection fix
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									force_selection
								</p>
								<p class="var_desc_name_value">
									phys_body: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Force selection of certain object. phys_body must have a hit_body script<br/>
								referred to it
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									get_camera_ray
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Returns a ray dictionary of raycast check. It is sending a ray under cursor.
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									check_node_selection_ray
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Additional selection check to fix selection inconsistency.<br/>
								Always checking if there's any object under cursor, and if there's one<br/>
								it is resetting nothing_selected_frames and is setting selected_body.<br/>
								Called every physics frame.
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									select_node
								</p>
								<p class="var_desc_name_value">
									unselect_previous = true
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								I've stolen that shit from Comics Renderer and now i'm not even sure what<br/>
								the fuck it does here. Alright, it used to do some generic selection<br/>
								logic here, but it was replaced by that fucked up selection fix i've made.<br/>
								It is still used in one case when nothing_selected_frames counter is above 10.<br/>
								I don't know why, and i don't want to know why, and i'm not gonna change it.
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									select_node_process
								</p>
								<p class="var_desc_name_value">
									body: any, unselect_previous = true
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Processes selection logic of the target body, used by selection fix instead of<br/>
								select_node. We fucking hate select_node.<br/>
								Checks for both HIT_BODY of CharacterBuilder and for "CommonEditorBody" used<br/>
								by gizmos.
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									select_hit_body
								</p>
								<p class="var_desc_name_value">
									hit_body: any, unselect_previous = true
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Select a hit_body, simple as that
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									unselect_hit_body
								</p>
								<p class="var_desc_name_value">
									hit_body: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Unselect a hit_body
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_remove_part
								</p>
								<p class="var_desc_name_value">
									part_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.remove_character_part from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_add_part
								</p>
								<p class="var_desc_name_value">
									part_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.add_character_part from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_select_part
								</p>
								<p class="var_desc_name_value">
									part_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to select_hit_body from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_remove_detail
								</p>
								<p class="var_desc_name_value">
									detail_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.remove_character_detail from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_add_detail
								</p>
								<p class="var_desc_name_value">
									detail_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.add_character_detail from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_select_detail
								</p>
								<p class="var_desc_name_value">
									detail_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to select_hit_body from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_parts_update
								</p>
								<p class="var_desc_name_value">
									parts: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to editor_UI.update_parts from character
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_details_update
								</p>
								<p class="var_desc_name_value">
									details: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to editor_UI.update_details from character
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_materials_update
								</p>
								<p class="var_desc_name_value">
									materials: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to editor_UI.update_materials from character
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_GLTF_export
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.export_GLTF from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_material_data_export
								</p>
								<p class="var_desc_name_value">
									data: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.update_material_data_export from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_update_debug_preview
								</p>
								<p class="var_desc_name_value">
									tex: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.update_debug_preview from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_hit_body_removal
								</p>
								<p class="var_desc_name_value">
									hit_body: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called when certain hit_body is about to be removed. In this case,<br/>
								it is used to unselect one and forget about it forever
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									edit_material
								</p>
								<p class="var_desc_name_value">
									mat: any, subtextures: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to editor_UI.edit_material from character
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									update_export_error
								</p>
								<p class="var_desc_name_value">
									text: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to editor_UI.update_export_error from character
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_UI_mouse_entered
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called when mouse enters a UI element
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_UI_mouse_exited
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called when mouse is exiting a UI element
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									save_character
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Save a character, this function is called by the "Save" button
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_new
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called on creation of a new character,<br/>
								calls "on_new" down all the possible nodes
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_load
								</p>
								<p class="var_desc_name_value">
									save: CB_SavedCharacter
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called on loading of another character,<br/>
								calls "on_load" down all the possible nodes
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									change_char_name
								</p>
								<p class="var_desc_name_value">
									char_name: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Changes a character name, called by the top text input box
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_update_assets
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Called on updating of all assets,<br/>
								calls "on_update_assets" down all the possible nodes
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_toggle_idle
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.toggle_idle from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_camera_reset
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to cam_rotation.reset_transforms from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									on_export_human_tex_changed
								</p>
								<p class="var_desc_name_value">
									value: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Function call down to character.set_export_human_tex from editor UI
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									_ready
								</p>
								<p class="var_desc_name_value">
									None
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Initialization logic, or, in this case,<br/>
								just a shitton of these signal connections
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									_input
								</p>
								<p class="var_desc_name_value">
									event: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Input function, simply checks if user is selecting anything
							</p>
							<div class="variable_desc_div">
								<p class="flair_func">
									Function
								</p>
								<p class="var_desc_name_text">
									_physics_process
								</p>
								<p class="var_desc_name_value">
									delta: any
								</p>
								<p class="func_return_text">
									any
								</p>
							</div>
							<p class="var_desc_text">
								Physics frame update to check following things:<br/>
								- If nothing_selected_frames is greater than 10, there's no selected_body<br/>
								- If the cursor didn't enter any UI elements, it'll check for selections<br/>
								- If the user is selecting something, it'll run the selection logic
							</p>
						</div>
					</div>
				</div>
			</center>
			<script src="../../../../assets/code_blocks.js">
			</script>
		</body>
	</html>
