<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			Index Project - characters_special_ability
		</title>
		<link rel="preload" as="image" href="../../../_guide/.images/_docs_background.png">
		<link rel="stylesheet" type="text/css" href="../../../_guide/style.css">
	</head>
	<body>
		<div class="scanlines">
		</div>
		<script src="../../../_guide/sidebar_injector_module.js">
		</script>
		<center>
			<div class="everything">
				<div class="sidebar">
					<h1>
						Index Project Guide
					</h1>
					<br/>
					<br/>
					<input type="text" class="searchbar" placeholder="Search...">
						<div class="sidebar-content" id="sidebar-content">
						</div>
					</div>
					<div class="main_body">
						<h3>
							Module: characters_special_ability
						</h3>
						<p class="red-marking">
							Documentation last edited: October 22, 2025 at 10:46 UTC
						</p>
						<div class="lang-select-div">
							<a href="./index.html">
								ENG
							</a>
							<a href="./index_rus.html">
								RUS
							</a>
						</div>
						<h4>
							Description
						</h4>
						<p>
							Модуль для специальных способностей, созданный для объектов, работающих с <code class="gdscript">
								Character
							</code>
							или производных от него. Обычно не требуют ничего, кроме объекта персонажа для инициализации, и, как следствие, работают как довольно универсальный инструмент для случаев "активации специальных способностей", просто убедись, что запустил способность.<br>
							<br>
							Обычно они используются для так называемых "Специальных Устройств", которые могут использоваться как самим игроком, так и NPC.<br>
							<br>
							<code>
								Пример использования
							</code>
							<br>
							<code class="gdscript">
								<br>
								# Ссылка на нашего персонажа<br>
								var character: Character<br>
								# Ссылка на специальную способность<br>
								var spec_ability: CharacterSpecialAbility<br>
								<br>
								# Устанавливает специальную способность по её имени<br>
								func set_special_ability(ability_name: String):<br>
								&emsp;# Получаем экземпляр специальной способности...<br>
								&emsp;spec_ability = CharacterSpecialAbility.get_ability_instance(ability_name)<br>
								&emsp;# ... если он существует...<br>
								&emsp;if spec_ability:<br>
								&emsp;&emsp;# ... инициализируем его<br>
								&emsp;&emsp;spec_ability.initialize(character)<br>
								<br>
								# Обрабатываем специальную способность каждый кадр рендера/физики<br>
								func process_special_ability(delta):<br>
								&emsp;# Если нет специальной способности - выходим из функции<br>
								&emsp;if not spec_ability:<br>
								&emsp;&emsp;return<br>
								&emsp;<br>
								&emsp;# Обновляем состояние способности<br>
								&emsp;spec_ability.update(delta)<br>
								&emsp;<br>
								&emsp;# Обрабатываем ввод активации способности<br>
								&emsp;if Input.is_action_just_pressed("special_ability"):<br>
								&emsp;&emsp;# Ничего не делаем, если способность всё ещё на перезарядке<br>
								&emsp;&emsp;if spec_ability.is_cooldown():<br>
								&emsp;&emsp;&emsp;return<br>
								&emsp;&emsp;# Иначе - запускаем её<br>
								&emsp;&emsp;spec_ability.run_ability()<br>
							</code>
							<br>
							<br>
							<br>
							API всей этой штуки позволяет легко сделать её пригодной для использования как NPC, так и игроком. Однако тебе нужно понимать, что API всё ещё ограничен/упрощён. По сути, единственное, что ты можешь делать со своими специальными способностями - это инициализировать, обновлять и "запускать" их.<br>
							<br>
							<code>
								Шаблон для твоей специальной способности
							</code>
							<br>
							<code class="gdscript">
								<br>
								# Описание твоей крутой специальной способности здесь.<br>
								<br>
								extends CharacterSpecialAbility<br>
								# Наследование от этого класса даёт тебе доступ к следующим переменным:<br>
								# character_owner - Character, владеющий этой способностью<br>
								# cooldown - Перезарядка<br>
								# cooldown_timer - Сколько времени осталось до окончания перезарядки<br>
								# ability_name - Имя способности<br>
								#<br>
								# Поэтому ты можешь использовать их для своих нужд, например:<br>
								# Переопределяя логику для игрока с помощью "character_owner.is_player"<br>
								<br>
								# Запускает специальную способность, вызывается однажды игроком/NPC/и т.д.<br>
								func on_run_ability():<br>
								&emsp;pass<br>
								<br>
								# Логика обновления этой специальной способности.<br>
								func on_update(delta: float):<br>
								&emsp;pass<br>
								<br>
								# Инициализация этой специальной способности. Происходит только один раз при назначении персонажу.<br>
								func on_initialize():<br>
								&emsp;pass<br>
							</code>
							<br>
							<br>
							<br>
							Все скрипты специальных способностей хранятся в <code class="gdscript">
								"res://modules/characters_special_ability/src/abilities/"
							</code>
							, если ты хочешь, чтобы они были валидны - храни их там. Как следствие, имя способности определяется в имени файла скрипта, например, <code class="gdscript">
								"defense_field.gd"
							</code>
							создаёт специальную способность с именем <code>
								defense_field
							</code>
							, которую later можно инстанциировать с помощью <code class="gdscript">
								CharacterSpecialAbility.get_ability_instance("defense_field")
							</code>
							.<br>
							<br>
							Для получения дополнительных примеров использования проверь исходный код других существующих специальных способностей, это может помочь тебе лучше понять логику.
						</p>
						<h3>
							General Information
						</h3>
						<h4>
							Root directories list
						</h4>
						<p>
							assets, docs, src
						</p>
						<h4>
							Nodes
						</h4>
						<p>
							<a class="a_simple" href="./scripts/heal_support.html">
								heal_support
							</a>
						</p>
						<h4>
							Classes
						</h4>
						<p>
							<a class="a_simple" href="./scripts/teleport.html">
								teleport
							</a>
							<br>
							<a class="a_simple" href="./scripts/defense_field.html">
								defense_field
							</a>
							<br>
							<a class="a_simple" href="./scripts/invinsibility.html">
								invinsibility
							</a>
							<br>
							<a class="a_simple" href="./scripts/grenade_madness.html">
								grenade_madness
							</a>
							<br>
							<a class="a_simple" href="./scripts/speed.html">
								speed
							</a>
							<br>
							<a class="a_simple" href="./scripts/heal_support.html">
								heal_support
							</a>
							<br>
							<a class="a_simple" href="./scripts/flashbang.html">
								flashbang
							</a>
							<br>
							<a class="a_simple" href="./scripts/killbound.html">
								killbound
							</a>
							<br>
							<a class="a_simple" href="./scripts/character_special_ability.html">
								CharacterSpecialAbility
							</a>
						</p>
						<h4>
							Resources
						</h4>
						<p>
							None
						</p>
						<h4>
							Other Scripts
						</h4>
						<p>
							None
						</p>
					</div>
				</div>
			</center>
			<script src="../../../_guide/code_blocks.js">
			</script>
		</body>
	</html>
