<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			Index Project - spatial_ubershader
		</title>
		<link rel="preload" as="image" href="../../../assets/images/docs_background.png">
		<link rel="stylesheet" type="text/css" href="../../../assets/style.css">
	</head>
	<body>
		<div class="scanlines">
		</div>
		<script src="../../../assets/sidebar_injector_module.js">
		</script>
		<center>
			<div class="everything">
				<div class="sidebar">
					<h1>
						Index Project Guide
					</h1>
					<br/>
					<br/>
					<input type="text" class="searchbar" placeholder="Search...">
						<div class="sidebar-content" id="sidebar-content">
						</div>
					</div>
					<div class="main_body">
						<h3>
							Module: spatial_ubershader
						</h3>
						<p class="red-marking">
							Documentation last edited: October 23, 2025 at 14:33 UTC
						</p>
						<div class="lang-select-div">
							<a href="./index.html">
								ENG
							</a>
							<a href="./index_rus.html">
								RUS
							</a>
						</div>
						<h4>
							Description
						</h4>
						<p>
							Так, значит... <code class="gdscript">
								SpatialMaterial
							</code>
							. Звучит как план. Звучит как ВСЁ, что тебе когда-либо могло понадобиться от материала в 3D. Ага. Звучит здорово. Звучит правдоподобно. Но что происходит, когда ты используешь свой гигамозг, чтобы добавить дополнительный шейдерный эффект? О нет, всё разваливается! Тебе приходится использовать <code class="gdscript">
								ShaderMaterial
							</code>
							, чтобы сделать свои собственные эффекты! А что, если ты захочешь переиспользовать что-то, что было в <code class="gdscript">
								SpatialMaterial
							</code>
							? Ну, чувак, просто скопипасть это или что-то в этом роде, нам всё равно. Я был немного зол, поэтому сделал ультимативную систему управления спагетти, угадай, что это? Правильно, это тот самый модуль. <code class="gdscript">
								"Ubershader"
							</code>
							— такое умное слово, но на самом деле всё сводится к автоматизации копипастинга шейдерного кода. Тебе больше не нужно выполнять эту 5-минутную задачу, я потратил целую вечность, шлифуя эту автоматизированную хрень. Используй её. Пожалуйста. Я умоляю. На самом деле, это не имеет значения, все материалы в этом проекте ЯВЛЯЮТСЯ <code class="gdscript">
								UserSpatialUbershader
							</code>
							, так что ты испытаешь приличный прессинг со стороны этого проекта, чтобы использовать именно этот :)<br>
							<br>
							В этом модуле есть два класса, о которых тебе действительно нужно знать: <code class="gdscript">
								SpatialUbershader
							</code>
							и <code class="gdscript">
								UserSpatialUbershader
							</code>
							. <code class="gdscript">
								SpatialUbershader
							</code>
							— это основная логика этого модуля. Это ультимативный бомбический комбайнер спагетти, миксер, менеджер, чем бы он ни был. Однако, этот класс сам по себе не предоставляет user-friendly интерфейс, и из-за того, как работает Godot... Что ж, скажем так, я был вынужден сделать <code class="gdscript">
								UserSpatialUbershader
							</code>
							. <code class="red-marking">
								Этот класс НЕ написан вручную.
							</code>
							Он предоставляет export переменные и всю эту прикольную хрень, но писать его вручную было бы самоубийством. Именно поэтому существует <code class="gdscript">
								"res://modules/spatial_ubershader/assets/code_generation_scene/code_generator.gd"
							</code>
							, редакторский скрипт, который ты можешь запустить, чтобы обновить код в <code class="gdscript">
								UserSpatialUbershader
							</code>
							. Другими словами, <code class="gdscript">
								UserSpatialUbershader
							</code>
							- это просто более прикольный фасад для <code class="gdscript">
								SpatialUbershader
							</code>
							, ебучий мейкап, если хочешь. Прячет уродливое лицо. Мы все любим прикольную ложь, не так ли?<br>
							<br>
						</p>
						<h4 style="width: 60%">
							Использование материала, находясь в окопах
						</h4>
						<p>
							<br>
							<img src="../../../assets/images/spatial_ubershader/use0.png" width="400px" onclick="maximizeImage(this)" class="clickable-image">
								<br>
								<img src="../../../assets/images/spatial_ubershader/use1.png" width="400px" onclick="maximizeImage(this)" class="clickable-image">
									<br>
									Что тебе нужно понять об этом материале, так это то, что он может иметь несколько эффектов. Даже "albedo" текстура - тоже эффект. Ты просто включаешь нужные тебе эффекты, и когда закончишь: Жми <code class="gdscript">
										"Force Update"
									</code>
									, это обновит шейдерный код и параметры, которые ты можешь настраивать. Каждый эффект имеет свою собственную назначенную группу, которую ты можешь расширять и назначать нужные значения/текстуры. Проще некуда.<br>
									<br>
								</p>
								<h4 style="width: 60%">
									Как сделать свой собственный крутой эффект
								</h4>
								<p>
									<br>
									Слушай сюда, сынок, это очень сложная и пугающая задача... Она требует много терпения... На самом деле, кого я обманываю? Загляни в <code class="gdscript">
										"res://modules/spatial_ubershader/assets/effects/"
									</code>
									, пролистай эффекты, обрати внимание на паттерны, которые встречаются повсюду. Этот проект очень заточен под паттерны, знаешь ли? Давай взглянем на наш любимый эффект <code class="gdscript">
										"albedo"
									</code>
									.<br>
									<code class="gdscript">
										<br>
										.<br>
										└── albedo<br>
										&emsp;├── config.tres<br>
										&emsp;└── shader.tres<br>
									</code>
									<br>
									Все твои фанковые-шманковые шейдерные эффекты ДОЛЖНЫ иметь два файла: <code class="gdscript">
										"config.tres"
									</code>
									и <code class="gdscript">
										"shader.tres"
									</code>
									. <code class="gdscript">
										"config.tres"
									</code>
									— это просто <code class="gdscript">
										SpatialUbershaderEffectConfig
									</code>
									ЧЁРТ, ЭТО НАЗВАНИЕ КЛАССА УБИВАЕТ МЕНЯ ох, извини, я хотел сказать, что это конфиг для твоего эффекта, который в основном полезен для настройки его приоритета порядка, все эффекты обрабатываются в своего рода очереди. <code class="gdscript">
										"shader.tres"
									</code>
									- это шейдерный код для твоего spatial шейдерного эффекта.<br>
									<br>
									Шейдеры в данном случае - это не просто "шейдеры", у них есть некий мета-обработчик, о котором тебе нужно знать. Давай возьмём наш любимый альбедо-шейдер в качестве примера:<br>
									<code>
										<br>
										shader_type spatial; //__IGNORE_LINE__<br>
										<br>
										// Входная текстура альбедо<br>
										//__ADD_PROPERTY::effect_tex::TEXTURE<br>
										uniform sampler2D effect_tex: hint_albedo;<br>
										<br>
										// Множитель цветового оттенка<br>
										//__ADD_PROPERTY::effect_color::COLOR<br>
										uniform vec4 effect_color: hint_color;<br>
										<br>
										// Блок корректировки UV<br>
										// __ADD_FLAG::effect_uv_tweak<br>
										// __FLAG::effect_uv_tweak<br>
										// Горизонтальный масштаб текстуры<br>
										//__ADD_PROPERTY::effect_UV_scale_x::FLOAT<br>
										uniform float effect_UV_scale_x = 1.0;<br>
										// Вертикальный масштаб текстуры<br>
										//__ADD_PROPERTY::effect_UV_scale_y::FLOAT<br>
										uniform float effect_UV_scale_y = 1.0;<br>
										// Горизонтальное смещение текстуры<br>
										//__ADD_PROPERTY::effect_UV_offset_x::FLOAT<br>
										uniform float effect_UV_offset_x = 0.0;<br>
										// Вертикальное смещение текстуры<br>
										//__ADD_PROPERTY::effect_UV_offset_y::FLOAT<br>
										uniform float effect_UV_offset_y = 0.0;<br>
										// __FLAG_END<br>
										<br>
										//__FRAGMENT_SPLIT__<br>
										void fragment()
										{ //__IGNORE_LINE__<br>
										&emsp;// Базовые UV-координаты<br>
										&emsp;vec2 effect_uv = UV;<br>
										&emsp;<br>
										&emsp;// Блок корректировки UV (включается conditionally)<br>
										&emsp;// __FLAG::effect_uv_tweak<br>
										&emsp;effect_uv.x *= effect_UV_scale_x;   // Применяем горизонтальный масштаб<br>
										&emsp;effect_uv.y *= effect_UV_scale_y;   // Применяем вертикальный масштаб<br>
										&emsp;effect_uv.x += effect_UV_offset_x;  // Применяем горизонтальное смещение<br>
										&emsp;effect_uv.y += effect_UV_offset_y;  // Применяем вертикальное смещение<br>
										&emsp;// __FLAG_END<br>
										&emsp;<br>
										&emsp;// Сэмплируем текстуру и применяем цветовой оттенок<br>
										&emsp;vec4 effect_tex_color = texture(effect_tex, effect_uv);<br>
										&emsp;ALBEDO = effect_tex_color.rgb * effect_color.rgb;<br>
										}
										//__IGNORE_LINE__<br>
									</code>
									<br>
									<br>
									Итак, ты мог заметить некоторые комментарии, которые не очень-то похожи на человеческие. Звучит так, будто машина взбунтовалась и собирается тебя убить. Что ж, это то, что я называю мета-обработкой, ага. Эти комментарии должны дать <code class="gdscript">
										SpatialUbershader
									</code>
									понять, что, чёрт возьми, он должен делать с твоим чёртовым кодом. Если ты просто скормишь ему шейдер без всего этого - он примет ислам и откажется иметь с тобой дело, неверный. Скорее всего, это приведёт к сломанному сгенерированному шейдерному коду, который не будет делать ничего ценного. К счастью для тебя, я здесь, чтобы помочь, пока троллю твою задницу. Вот список твоих чёртовых комментариев, которые ты ДОЛЖЕН ЗНАТЬ И ПОМНИТЬ К КОНЦУ ПРОЧТЕНИЯ.<br>
									<code>
										<br>
										Вместо "name" может быть что угодно, убедись, что звёзды сошлись.<br>
										<br>
										//__IGNORE_LINE__<br>
										&emsp;Игнорирует строку. То есть... Вау, неожиданно? Окей, тебе нужно поставить этого ублюдка в строках с "shader_type" и определениями "void fragment()", "void vertex()" и "void light()", а также их скобками. Иначе система сломается. Жёстко.<br>
										//__ADD_PROPERTY::name::TEXTURE<br>
										&emsp;Регистрирует uniform переменную как текстуру.<br>
										//__ADD_PROPERTY::name::COLOR<br>
										&emsp;Регистрирует uniform переменную как цвет.<br>
										//__ADD_PROPERTY::name::FLOAT<br>
										&emsp;Регистрирует uniform переменную как float.<br>
										&emsp;Чёрт, эти три так просты, разве не удивительно?<br>
										//__VERTEX_SPLIT__<br>
										&emsp;Говорит чёртовой машине, что следующая функция будет vertex, и что код принадлежит туда.<br>
										//__FRAGMENT_SPLIT__<br>
										&emsp;Говорит чёртовой машине, что следующая функция будет fragment.<br>
										//__LIGHT_SPLIT__<br>
										&emsp;Говорит чёртовой машине, что следующая функция будет light.<br>
										// __ADD_FLAG::name<br>
										&emsp;Добавляет новый флаг для обработки ubershader'ом.<br>
										// __FLAG::name<br>
										&emsp;Говорит чёртовой машине, что следующие строки кода могут быть добавлены в результирующий шейдер только если флаг активен.<br>
										// __FLAG_END<br>
										&emsp;Говорит чёртовой машине, что обработка флага закончена, так что она может продолжать делать своё дерьмо как обычно.<br>
									</code>
									<br>
									<br>
									Если ты всё ещё чувствуешь себя сбитым с толку, я предлагаю тебе сделать две вещи:<br>
									&emsp;- Взгляни на существующие эффекты, этот след трупов действительно может тебя многому научить.<br>
									&emsp;- Для получения дополнительной информации, пожалуйста, перечитай.<br>
									<br>
									Веселись.
								</p>
								<h3>
									General Information
								</h3>
								<h4>
									Root directories list
								</h4>
								<p>
									assets, docs, src
								</p>
								<h4>
									Nodes
								</h4>
								<p>
									<a class="a_simple" href="./scripts/spatial_ubershader.html">
										SpatialUbershader
									</a>
									<br>
									<a class="a_simple" href="./scripts/spatial_ubershader_shaders.html">
										SpatialUbershaderShaders
									</a>
								</p>
								<h4>
									Classes
								</h4>
								<p>
									<a class="a_simple" href="./scripts/user_spatial_ubershader.html">
										UserSpatialUbershader
									</a>
								</p>
								<h4>
									Resources
								</h4>
								<p>
									<a class="a_simple" href="./scripts/effect_config.html">
										SpatialUbershaderEffectConfig
									</a>
								</p>
								<h4>
									Other Scripts
								</h4>
								<p>
									<a class="a_simple" href="./scripts/code_generator.html">
										code_generator
									</a>
								</p>
							</div>
						</div>
					</center>
					<script src="../../../assets/code_blocks.js">
					</script>
				</body>
			</html>
