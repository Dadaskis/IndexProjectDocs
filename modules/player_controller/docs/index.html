<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>
			Index Project - player_controller
		</title>
		<link rel="preload" as="image" href="../../../assets/images/docs_background.png">
		<link rel="stylesheet" type="text/css" href="../../../assets/style.css">
	</head>
	<body>
		<div class="scanlines">
		</div>
		<script src="../../../assets/sidebar_injector_module.js">
		</script>
		<center>
			<div class="everything">
				<div class="sidebar">
					<h1>
						Index Project Guide
					</h1>
					<br/>
					<br/>
					<input type="text" class="searchbar" placeholder="Search...">
						<div class="sidebar-content" id="sidebar-content">
						</div>
					</div>
					<div class="main_body">
						<h3>
							Module: player_controller
						</h3>
						<p class="red-marking">
							Documentation last edited: October 23, 2025 at 14:33 UTC
						</p>
						<div class="lang-select-div">
							<a href="./index.html">
								ENG
							</a>
							<a href="./index_rus.html">
								RUS
							</a>
						</div>
						<h4>
							Description
						</h4>
						<p>
							The player himself. Or themselves. Either way, this is a player thing. This is a pretty complex module, but mainly it consists of code, so we'll break it down file-by-file.<br>
							<br>
						</p>
						<h4 style="width: 60%">
							Script Structure
						</h4>
						<p>
							<br>
						</p>
						<center>
							<code class="gdscript">
								<br>
								.<br>
								├── globals<br>
								│   ├── global_data.gd<br>
								│   ├── pc_water_list.gd<br>
								│   └── player_stats.gd<br>
								├── mouse_look.gd<br>
								├── nodes<br>
								│   ├── ladder.gd<br>
								│   ├── player_spawn.gd<br>
								│   ├── player_teleport_pos.gd<br>
								│   └── water.gd<br>
								├── player_camera_motion.gd<br>
								├── player_main.gd<br>
								├── states<br>
								│   ├── state_debug_fly.gd<br>
								│   ├── state_ladder.gd<br>
								│   ├── state_walk.gd<br>
								│   └── state_water.gd<br>
								├── stats_adder.gd<br>
								└── weapon_handler.gd<br>
							</code>
						</center>
						<p>
							<br>
							<br>
						</p>
						<h2>
							Player Main Script <code class="gdscript">
								"./player_main.gd"
							</code>
						</h2>
						<p>
							<br>
							So this is a class. A big one. Not the biggest one in the game, but hey (I didn't check anyway). This ain't the typical <code class="gdscript">
								"player.gd"
							</code>
							that would be the biggest thing in the game. Alright, it doesn't change the fact it is pretty huge. It is huge because there's a lot of systems that player would need to interact with. <code class="gdscript">
								"player_main.gd"
							</code>
							is basically some kind of hub for all kinds of systems. It does the following:<br>
							&emsp;- Takes <code class="gdscript">
								"res://modules/player_controller/assets/scene/player.tscn"
							</code>
							and initialized the shit out of it. Like, the scene has *some* nodes, but the rest happens in the code.<br>
							&emsp;- Manages/controls separated movement states (walk, swim, ladder, debug flying).<br>
							&emsp;&emsp;- Uses <code class="gdscript">
								PlayerStateWalk
							</code>
							for walking/running physics.<br>
							&emsp;&emsp;- Uses <code class="gdscript">
								PlayerStateLadder
							</code>
							for ladder movement.<br>
							&emsp;&emsp;- Uses <code class="gdscript">
								PlayerStateWater
							</code>
							for swimming logic.<br>
							&emsp;&emsp;- Uses <code class="gdscript">
								PlayerStateDebugFly
							</code>
							for free flight debuggning mode.<br>
							&emsp;- Directly manages player height transition.<br>
							&emsp;&emsp;- Used by <code class="gdscript">
								PlayerStateWalk
							</code>
							to tweak height for crouching.<br>
							&emsp;- Processes picked objects physics and positioning.<br>
							&emsp;- Processes location bounds check, resets the player's position if out-of-bounds (maybe I need to make an out_of_bounds location instead?)<br>
							&emsp;- Controls camera hierarchy and transforms.<br>
							&emsp;- Manages FOV adjustments from settings.<br>
							&emsp;- Handles camera punch/shake settings.<br>
							&emsp;- Coordinates multiple camera effects like suppression, low HP tremor, explosion wave.<br>
							&emsp;- Initializes and updates all HUD elements, manages their visibility.<br>
							&emsp;&emsp;- Mainly just calls <code class="gdscript">
								HeadsUpDisplay
							</code>
							class for that.<br>
							&emsp;- Processes the "mission failure" (death).<br>
							&emsp;- Handles some logic related to crosshairs (like in <code class="gdscript">
								process_dealt_damage_info
							</code>
							function).<br>
							&emsp;- Handles health regeneration logic.<br>
							&emsp;- Initializes and handles the weapon system.<br>
							&emsp;&emsp;- <code class="gdscript">
								PlayerWeaponHandler
							</code>
							handles the inputs for weapons.<br>
							&emsp;&emsp;- <code class="gdscript">
								PlayerWeaponSystem
							</code>
							is providing an interface for weapons.<br>
							&emsp;- Initializes mouse movement logic.<br>
							&emsp;&emsp;- Afterwards, <code class="gdscript">
								PlayerMouseLook
							</code>
							is handling the mouse movement logic to move the camera.<br>
							&emsp;- Initializes post-processing logic.<br>
							&emsp;&emsp;- Uses <code class="gdscript">
								PostProcessingSystem
							</code>
							for this.<br>
							&emsp;&emsp;- Stores individual effect classes (<code class="gdscript">
								FlashbangPostProcessing
							</code>
							, <code class="gdscript">
								UnderwaterPostProcessing
							</code>
							, etc.)<br>
							&emsp;- Stores and handles <code class="gdscript">
								Character
							</code>
							data.<br>
							&emsp;- Handles footsteps with help of <code class="gdscript">
								Footstep
							</code>
							class.<br>
							&emsp;- Handles some equipment/perk logic with help of <code class="gdscript">
								LoadoutSystem
							</code>
							.<br>
							&emsp;- Handles save system's load/save functions to save its data.<br>
							<code>
								Look, I know what you'll say.
							</code>
							<br>
							You'll say it could've been more modular. Yes, it could've been. And I'll tell you to shut the fuck up and see the reality as it is - I just needed something that would've worked and something that wouldn't fuck with my mind too much while having not-so-much cross-script calls. So, you and me, we will work with this monolithic barely-separated monster because that's what life is.<br>
							<br>
						</p>
						<h2>
							Player Mouse Look <code class="gdscript">
								"./mouse_look.gd"
							</code>
						</h2>
						<p>
							<br>
							This is a simple class that handles the mouse movement logic to move the camera, there's nothing special here.<br>
							<br>
						</p>
						<h2>
							Player Camera Motion for motion blur <code class="gdscript">
								"./player_camera_motion.gd"
							</code>
						</h2>
						<p>
							<br>
							<code class="red-marking">
								Kinda obsolete
							</code>
							This class is used for motion blur that isn't really a part of this game anymore. There are some left-overs in the code and it can be kinda restored, but why would you need it anyway? It wasn't really nice. It was buggy and fucky.<br>
							<br>
						</p>
						<h2>
							Player Weapon Handler <code class="gdscript">
								"./player_weapon_handler.gd"
							</code>
						</h2>
						<p>
							<br>
							A class that handles interaction with the weapon system. Keep in mind, <code class="gdscript">
								PlayerWeaponSystem
							</code>
							class is not a part of this module. <code class="gdscript">
								PlayerWeaponHandler
							</code>
							only "communicates" with the weapon system and handles some inputs. I'd say it isn't really necessary to exist, but it is what it is.<br>
							<br>
						</p>
						<h2>
							Player Stats Adder "
						</code>
						./stats_adder.gd"
					</code>
				</h2>
				<p>
					<br>
					<code class="red-marking">
						Obsolete
					</code>
					So there was a fancy ass screen at the end of mission with all kinds of stats. It's no longer a working part of this game, there are still some left-overs that I'm too lazy to remove.<br>
					<br>
				</p>
				<h4 style="width: 60%">
					Autoloads
				</h4>
				<p>
					<br>
					<code class="gdscript">
						PlayerData
					</code>
					- basically exists just because I needed to write <code class="gdscript">
						PlayerData.get_player()
					</code>
					somewhere to get a player, that's kinda it.<br>
					<code class="gdscript">
						PCWaterList
					</code>
					- just a simple list of all water sources, however it also can be used to make splashes.<br>
					<code class="gdscript">
						PlayerStats
					</code>
					- <code class="red-marking">
						Obsolete
					</code>
					related to the forementioned player stats that aren't really a part of this game anymore.<br>
					<br>
				</p>
				<h4 style="width: 60%">
					Nodes
				</h4>
				<p>
					<br>
					<br>
				</p>
				<h2>
					<code class="gdscript">
						PlayerControllerLadder
					</code>
				</h2>
				<p>
					<br>
					<img src="../../../assets/images/player_controller/ladder0.png" width="400px" onclick="maximizeImage(this)" class="clickable-image">
						<br>
						A ladder node. Player enters an area, climbs up/down, etc. Forces the player to enter <code class="gdscript">
							PlayerStateLadder
						</code>
						. This thing is kinda self-explanatory, if you want to see more - take a look into source code. Works by setting the start and end points.<br>
						<br>
					</p>
					<h2>
						<code class="gdscript">
							PlayerControllerWater
						</code>
					</h2>
					<p>
						<br>
						<img src="../../../assets/images/player_controller/water0.png" width="400px" onclick="maximizeImage(this)" class="clickable-image">
							<br>
							A water node. Player enters an area and starts swimming. Forces the player to enter <code class="gdscript">
								PlayerStateWater
							</code>
							. Works by setting the start and end points.<br>
							<br>
						</p>
						<h2>
							<code class="gdscript">
								PlayerSpawn
							</code>
						</h2>
						<p>
							<br>
							<img src="../../../assets/images/player_controller/player_spawn0.png" width="400px" onclick="maximizeImage(this)" class="clickable-image">
								<br>
								A player spawn node. Spawns the player during the location initialization. It is worth mentioning that player truly "spawns" only once and their instance is reused across different locations to speed up the loading screen. Transition points can be set for transitions between locations. It can also be used alongside location events to either react to spawning or to forcefully spawn the player again.<br>
								<br>
							</p>
							<h4 style="width: 60%">
								States
							</h4>
							<p>
								<br>
								<code class="gdscript">
									PlayerStateWalk
								</code>
								- the common state when the player is just walking around.<br>
								<code class="gdscript">
									PlayerStateLadder
								</code>
								- activated during climbing the ladder, simply turns the movement to movement alongside the defined line (which is defined by <code class="gdscript">
									PlayerControllerLadder
								</code>
								).<br>
								<code class="gdscript">
									PlayerStateWater
								</code>
								- activated during swimming in the area of water defined by <code class="gdscript">
									PlayerWater
								</code>
								.<br>
								<code class="gdscript">
									PlayerStateDebugFly
								</code>
								- activated with use of console commands like <code class="gdscript">
									"debug_fly"
								</code>
								.
							</p>
							<h3>
								General Information
							</h3>
							<h4>
								Root directories list
							</h4>
							<p>
								assets, docs, src
							</p>
							<h4>
								Nodes
							</h4>
							<p>
								<a class="a_simple" href="./scripts/ladder.html">
									PlayerControllerLadder
								</a>
								<br>
								<a class="a_simple" href="./scripts/player_teleport_pos.html">
									PlayerTeleportPos
								</a>
								<br>
								<a class="a_simple" href="./scripts/water.html">
									PlayerControllerWater
								</a>
								<br>
								<a class="a_simple" href="./scripts/player_spawn.html">
									PlayerSpawn
								</a>
								<br>
								<a class="a_simple" href="./scripts/pc_water_list.html">
									PCWaterList
								</a>
								<br>
								<a class="a_simple" href="./scripts/player_stats.html">
									PlayerStats
								</a>
								<br>
								<a class="a_simple" href="./scripts/global_data.html">
									PlayerData
								</a>
								<br>
								<a class="a_simple" href="./scripts/player_main.html">
									PlayerMain
								</a>
							</p>
							<h4>
								Classes
							</h4>
							<p>
								<a class="a_simple" href="./scripts/player_camera_motion.html">
									PlayerCameraMotion
								</a>
								<br>
								<a class="a_simple" href="./scripts/weapon_handler.html">
									PlayerWeaponHandler
								</a>
								<br>
								<a class="a_simple" href="./scripts/stats_adder.html">
									PlayerStatsAdder
								</a>
								<br>
								<a class="a_simple" href="./scripts/mouse_look.html">
									PlayerMouseLook
								</a>
								<br>
								<a class="a_simple" href="./scripts/state_debug_fly.html">
									PlayerStateDebugFly
								</a>
								<br>
								<a class="a_simple" href="./scripts/state_water.html">
									PlayerStateWater
								</a>
								<br>
								<a class="a_simple" href="./scripts/state_ladder.html">
									PlayerStateLadder
								</a>
								<br>
								<a class="a_simple" href="./scripts/state_walk.html">
									PlayerStateWalk
								</a>
							</p>
							<h4>
								Resources
							</h4>
							<p>
								None
							</p>
							<h4>
								Other Scripts
							</h4>
							<p>
								None
							</p>
						</div>
					</div>
				</center>
				<script src="../../../assets/code_blocks.js">
				</script>
			</body>
		</html>
